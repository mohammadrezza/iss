# Notes
- **TLS definition**
	- it is a protocol for creating a secure communication channel over the Internet
	- that replaces SSL, which is the original old version of the protocol
	- it is built on top of TCP running at transport level
	- SSL/TLS protocol versions below TLS v1.2 are insecure and deprecated
- **TLS security properties**
	- **Peer authentication of the server**
		- this allows to verify that the client is connecting to the legitimate server, defending
		  against an attacker impersonating the server
	- **Message confidentially (data confidentiality)**
		- ensures that attackers cannot read the traffic exchanged
	- **Message authentication and integrity**
		- ensures attackers cannot modify the traffic exchanged or inject new data
	- **Provides protection against replay, reordering, filtering/cancellation attacks**
	- **Easily applicable to all protocol on TCP**
		- HTTP, SMTP, NNTP, FTP, TELNET
- **TLS operation phases**
	- **TCP connection (3-way handshake)**
	- **TLS handshake**
	- **Data transfer**
	- **TLS teardown**
- **TLS session vs TLS connection**
	- **TLS session**
		- is a logical association between client and server
		- created by the TLS handshake protocol
		- defines a set of cryptographic parameters common for several connections
	- **TLS connection**
		- a transient channel between client and server
		- associated to one specific TLS session (1:1)
		- crypto parameters negotiated for each TLS connection
		- multiple TLS connections may share the same TLS session for efficiency
- **TLS Architecture**
-
- **Forward secrecy**
	-
- **TLS activation**
	- **TLS then proto**
		- first a TLS channel is established, then the specific application protocol is run over the
		  secure channel
		- new protocol names in URLs
			- if TLS is to be used to secure HTTP, the client specify this by replacing the
			  protocol name with the ‘s’ variant in the URL, e.g. http with https
		- separate TLS ports
			- client connects to a TCP port on which a TLS process is running, e.g. a web
			  server expects unprotected HTTP requests on port 80, while it performs a TLS
			  handshake after a TCP connection is established on port 443 **????**
		- enforcing a TLS connection
			- client establishes an HTTP connection to port 80 (e.g. type www.polito.it without specifying the protocol) the server returns a 30x error thus triggering an HTTP redirect, with a https URL as redirection destination
	- **Proto then TLS**
		- the client first starts the the application protocol, then (when needed) server upgrades to a
		  secure channel through STARTTLS
		- activation process
			- client establishes an unencrypted TCP connection and starts the corresponding application-level protocol
			- server sends the STARTTLS keyword over this connection
			- the client interrupts the application protocol and performs a TLS handshake on the existing TCP connection
			- when the TLS handshake is completed, the client restarts the application protocol
- **Data transfer with HTTP over TLS**
- **TLS and virtual servers**
	- problem
		- it is hard to determine which virtual server the client wants to connect to because, in TLS, the secure channel is established before the application protocol
	- solutions
		- Wildcard server certificate
			- use one certificate for multiple virtual servers, so in the field of the URL there is CN=*.myweb.it . Private keys must be shared by all virtual servers
		- Subject Alternative Name (SAN) extension
			- this extension contains a list all the URLs, so private keys must be shared by all virtual servers. However this need to reissue the certificate at any addition or cancellation of a virtual server
		- Server Name Indication (SNI) extension
			- this is an extension of the handshake, not of the certificate. The client during the handshake phase indicates in which servers wants to connect by the ClientHello. This is widely used
- **TLS effectiveness**
	- using TLS defends against most lower-level network attacks
	-
- # Questions